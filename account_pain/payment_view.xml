<?xml version="1.0" encoding="utf-8"?>
<openerp>
  <data>

    <record id="account_payment.action_create_payment_order" model="ir.actions.act_window">
      <field name="view_id" ref="account_payment.view_create_payment_order"/>
    </record>

    <!-- change compared to view in account payment : 'name'-field replaced by 'invoice'-field -->
    <record model="ir.ui.view" id="view_move_line_tree_account_pain">
      <field name="name">account.pain.move.line.tree</field>
      <field name="model">account.move.line</field>
      <field name="type">tree</field>
      <field name="priority" eval="1"/>
      <field name="arch" type="xml">
        <tree string="Account Entry Line">
          <field name="partner_id"/>
          <field name="ref"/>
          <field name="invoice"/>
          <field name="journal_id"/>
          <field name="account_id"/>
          <field name="date_maturity"/>
          <field name="date"/>
          <field name="debit" sum="Total debit"/>
          <field name="credit" sum="Total credit"/>
          <field name="amount_to_pay"/>
          <field name="amount_currency"/>
          <field name="currency_id"/>
          <field name="period_id" invisible="1"/>
        </tree>
      </field>
    </record>
    
    <record id="view_payment_order_form_inherit" model="ir.ui.view">
      <field name="name">payment.order.form.inherit</field>
      <field name="model">payment.order</field>
      <field name="inherit_id" ref="account_payment.view_payment_order_form"/>
      <field name="arch" type="xml">
        <data>
          <xpath expr="/form/field/form/notebook/page/field[@name='state']" position="after">
            <group colspan="4" attrs="{'invisible':[('state','=','normal')]}">
              <field name="struct_comm_type" attrs="{'required':[('state','=','structured')]}"/>
            </group>
          </xpath>
          <xpath expr="/form/field/tree/field[@name='name']" position="after">
            <field name="communication"/>
          </xpath>
          <xpath expr="/form/group/button[@name='cancel']" position="after">
            <button name="button_undo_payment" states="done" string="Undo Payment" type="object" groups="account.group_account_manager" icon="gtk-cancel"/>
          </xpath>
          <xpath expr="/form/group/button[@name='set_done']" position="replace">
            <button name="%(account_payment.action_account_payment_make_payment)d" states="open" string="Make Payments" type="action" icon="gtk-execute"/>
          </xpath>
        </data>
      </field>
    </record>

    <record id="view_payment_mode_search_inherit" model="ir.ui.view">
      <field name="name">payment.mode.search.inherit</field>
      <field name="model">payment.mode</field>
      <field name="inherit_id" ref="account_payment.view_payment_mode_search"/>
      <field name="arch" type="xml">
          <field name="journal" position="after">
            <field name="type"/>
          </field>
      </field>
    </record>

    <record id="view_payment_mode_tree_inherit" model="ir.ui.view">
      <field name="name">payment.mode.tree.inherit</field>
      <field name="model">payment.mode</field>
      <field name="inherit_id" ref="account_payment.view_payment_mode_tree"/>
      <field name="arch" type="xml">
        <field name="journal" position="after">
          <field name="type"/>
        </field>
      </field>
    </record>

    <record id="view_payment_mode_form_inherit" model="ir.ui.view">
      <field name="name">payment.mode.form.inherit</field>
      <field name="model">payment.mode</field>
      <field name="inherit_id" ref="account_payment.view_payment_mode_form"/>
      <field name="arch" type="xml">
        <field name="journal" position="after">
          <field name="type"/>
        </field>
        <field name="bank_id" position="replace">
          <field name="bank_id" attrs="{'required':[('type','=','iso20022')]}"/>
        </field>
      </field>
    </record>
    
  </data>
</openerp>
